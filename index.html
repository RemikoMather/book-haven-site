<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://*.supabase.co; connect-src 'self' https://*.supabase.co; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src * 'self' data: https:;">
    <title>Book Haven - Your Literary Sanctuary</title>
    <meta name="description" content="Discover your next great read at Book Haven - a curated bookstore experience">
    
    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Book Haven - Your Literary Sanctuary">
    <meta property="og:description" content="Discover your next great read at our curated bookstore">
    <meta property="og:image" content="/images/bookhaven-social.jpg">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/design.css">
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/book-images.css">
    <link rel="stylesheet" href="css/loading-states.css">
    <link rel="stylesheet" href="css/image-placeholders.css">
    <link rel="stylesheet" href="css/collections.css">
    <link rel="stylesheet" href="css/gallery-items.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/notifications.css">
    <link rel="stylesheet" href="css/quick-actions.css">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Book Haven",
        "image": "/images/bookhaven-social.jpg",
        "description": "A curated bookstore experience",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "123 Bookmark Lane",
            "addressLocality": "Booktown",
            "postalCode": "BT 12345"
        },
        "openingHours": "Mo-Sa 09:00-21:00",
        "telephone": "+1-555-123-4567"
    }
    </script>
    <script src="js/image-loader.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <nav class="nav-container">
        <div class="nav-content">
            <a href="index.html" class="logo">Book Haven</a>
            <div class="nav-links">
                <a href="index.html" aria-current="page">Home</a>
                <a href="gallery.html">Gallery</a>
                <a href="about.html">About</a>
                <a href="custom.html">Custom</a>
                <a href="contact.html">Contact</a>
            </div>
            <div class="nav-cart">
                <button class="cart-toggle" aria-label="Open cart">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" data-cart-count aria-live="polite" hidden>0</span>
                </button>
                <div class="cart-dropdown">
                    <div class="cart-header">
                        <h3>Shopping Cart</h3>
                        <button class="close-cart" aria-label="Close cart">&times;</button>
                    </div>
                    <div id="cart-items" class="cart-items" aria-live="polite">
                        <!-- Cart items will be dynamically inserted here -->
                    </div>
                    <div class="cart-footer">
                        <div class="cart-total">
                            Total: $<span data-cart-total>0.00</span>
                        </div>
                        <button class="btn btn-primary checkout-btn" disabled>
                            Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main id="main">
        <section class="hero">
            <div class="container">
                <h1>Welcome to Book Haven</h1>
                <p class="hero-subtitle">Where every book tells a story</p>
                <div class="hero-cta">
                    <a href="gallery.html" class="btn btn-primary">Explore Collection</a>
                    <a href="about.html" class="btn btn-secondary">Our Story</a>
                </div>
            </div>
        </section>

        <section class="featured-collections section-padding">
            <div class="container">
                <h2 class="section-title">Featured Collections</h2>
                <div class="product-grid">
                    <div class="gallery-item">
                        <div class="img-container">
                            <img src="https://cdn.pixabay.com/photo/2019/01/30/08/30/book-3964050_640.jpg" 
                                 alt="The Great Adventure" 
                                 loading="lazy">
                        </div>
                        <div class="product-details">
                            <h3>The Great Adventure</h3>
                            <p class="book-author">By Jane Smith</p>
                            <p class="price">$24.99</p>
                            <button class="btn add-to-cart" data-product-id="1">Add to Cart</button>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="img-container">
                            <img src="https://cdn.pixabay.com/photo/2019/01/30/08/30/book-3964050_640.jpg" 
                                 alt="Rare Books Collection" 
                                 loading="lazy">
                        </div>
                        <div class="product-details">
                            <h3>Rare Finds</h3>
                            <p class="book-author">First Editions</p>
                            <p class="price">From $49.99</p>
                            <a href="gallery.html?category=rare" class="btn btn-secondary">View Collection</a>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="img-container">
                            <img src="https://cdn.pixabay.com/photo/2019/01/30/08/30/book-3964050_640.jpg" 
                                 alt="New Releases" 
                                 loading="lazy">
                        </div>
                        <div class="product-details">
                            <h3>New Arrivals</h3>
                            <p class="book-author">Fresh off the press</p>
                            <p class="price">This month's latest releases</p>
                            <a href="gallery.html?category=new" class="btn btn-secondary">Browse New</a>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="img-container">
                            <img src="https://cdn.pixabay.com/photo/2019/01/30/08/30/book-3964050_640.jpg" 
                                 alt="Local Authors" 
                                 loading="lazy">
                        </div>
                        <div class="product-details">
                            <h3>Local Authors</h3>
                            <p class="book-author">Community Voices</p>
                            <p class="price">Supporting local talent</p>
                            <a href="gallery.html?category=local" class="btn btn-secondary">Meet Authors</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="upcoming-events">
            <div class="container">
                <h2>Upcoming Events</h2>
                <div class="events-slider">
                    <article class="event-card">
                        <time datetime="2024-02-15">Feb 15</time>
                        <h3>Author Talk: Mystery Writing</h3>
                        <p>Join bestselling author Jane Smith for an evening of suspense</p>
                        <a href="about.html" class="btn btn-secondary">Learn More</a>
                    </article>
                    <!-- More event cards -->
                </div>
            </div>
        </section>
    </main>

    <div class="quick-actions">
        <button class="quick-actions-toggle" aria-label="Quick actions menu" aria-expanded="false" aria-controls="quick-actions-menu">
            <i class="fas fa-plus"></i>
        </button>
        <div id="quick-actions-menu" class="quick-actions-menu" role="menu">
            <a href="#" class="quick-action-item" role="menuitem" onclick="window.cart.showCart()">
                <i class="fas fa-shopping-cart"></i>
                <span>View Cart</span>
            </a>
            <a href="#footer-subscribe-form" class="quick-action-item" role="menuitem">
                <i class="fas fa-envelope"></i>
                <span>Subscribe</span>
            </a>
            <a href="contact.html" class="quick-action-item" role="menuitem">
                <i class="fas fa-phone"></i>
                <span>Contact Us</span>
            </a>
            <button class="quick-action-item" role="menuitem" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <i class="fas fa-arrow-up"></i>
                <span>Back to Top</span>
            </button>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content container">
            <div class="footer-section">
                <h3>Book Haven</h3>
                <p>Your Literary Sanctuary</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Newsletter</h3>
                <form class="footer-newsletter-form">
                    <div class="form-group">
                        <input type="email" class="form-input" placeholder="Enter your email" required>
                    </div>
                    <button type="submit" class="btn">Subscribe</button>
                </form>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Configuration and Dependencies -->
    <script src="js/init.js"></script>
    <script src="js/config.js" type="module"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="js/supabase-init.js"></script>
    <script>
        window.addEventListener('load', () => {
            if (typeof window.Supabase === 'undefined') {
                console.error('Supabase library failed to load');
            } else {
                window.initSupabase();
                console.log('DEBUG: Supabase initialized after page load');
            }
        });
    </script>
    
    <!-- Application Scripts -->
    <script src="js/debug.js" type="module"></script>
    <script src="js/supabase-config.js" type="module"></script>
    <script src="js/product-service.js" type="module"></script>
    <script src="js/storage-manager.js" type="module"></script>
    <script src="js/cart-manager.js" type="module"></script>
    <script src="js/gallery.js" type="module"></script>
    <script src="js/common.js" type="module"></script>
    <script src="js/mobile-nav.js" type="module"></script>
    <script src="js/newsletter.js" type="module"></script>
    <script src="js/quick-actions.js" type="module"></script>
    <script src="js/script.js" type="module"></script>
</body>
</html>
