<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore Book Haven's photo gallery featuring our store, events, and rare book collection">
    <title>Gallery - Book Haven</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <nav class="navbar">
        <div class="container">
            <div class="nav-left">
                <a href="index.html" class="logo">Book Haven</a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="gallery.html" aria-current="page">Gallery</a></li>
                <li><a href="custom.html">Custom</a></li>
            </ul>
            <div class="nav-right">
                <button id="view-cart" class="btn cart-btn" aria-label="View shopping cart">
                    Cart (<span id="cart-count">0</span>)
                </button>
            </div>
        </div>
    </nav>

    <main id="main">
        <section class="hero">
            <div class="container">
                <h1>Our Gallery</h1>
                <p>Step into the world of Book Haven</p>
            </div>
        </section>

        <section class="gallery-section container">
            <div class="gallery-filters" role="tablist" aria-label="Book category filters">
                <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">
                    All Books
                </button>
                <button class="filter-btn" data-filter="fiction" role="tab" aria-selected="false">
                    Fiction
                </button>
                <button class="filter-btn" data-filter="mystery" role="tab" aria-selected="false">
                    Mystery
                </button>
                <button class="filter-btn" data-filter="nonfiction" role="tab" aria-selected="false">
                    Non-Fiction
                </button>
                <button class="filter-btn" data-filter="classics" role="tab" aria-selected="false">
                    Classics
                </button>
            </div>

            <div class="gallery-grid" role="tabpanel">
                <div class="gallery-item" data-category="fiction" data-id="1" data-price="24.99">
                    <img src="images/books/fiction1.jpg" 
                         alt="The Great Adventure" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='images/placeholder.jpg';">
                    <h3>The Great Adventure</h3>
                    <p class="book-author">By Jane Smith</p>
                    <p class="price">$24.99</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                    <figcaption class="book-description">A thrilling journey through uncharted territories</figcaption>
                </div>
                <div class="gallery-item" data-category="mystery" data-id="2" data-price="29.99">
                    <img src="images/books/mystery1.jpg" 
                         alt="Midnight Mystery" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='images/placeholder.jpg';">
                    <h3>Midnight Mystery</h3>
                    <p class="book-author">By John Doe</p>
                    <p class="price">$29.99</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                    <figcaption class="book-description">A gripping detective story set in Victorian London</figcaption>
                </div>
                <div class="gallery-item" data-category="nonfiction" data-id="3" data-price="34.99">
                    <img src="images/books/nonfiction1.jpg" 
                         alt="The Art of Coding" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='images/placeholder.jpg';">
                    <h3>The Art of Coding</h3>
                    <p class="book-author">By Sarah Johnson</p>
                    <p class="price">$34.99</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                    <figcaption class="book-description">A comprehensive guide to modern programming</figcaption>
                </div>
                <div class="gallery-item" data-category="classics" data-id="4" data-price="19.99">
                    <img src="images/books/classic1.jpg" 
                         alt="Pride and Prejudice" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='images/placeholder.jpg';">
                    <h3>Pride and Prejudice</h3>
                    <p class="book-author">By Jane Austen</p>
                    <p class="price">$19.99</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                    <figcaption class="book-description">A timeless classic of romance and social commentary</figcaption>
                </div>
            </div>

            <!-- Cart Modal -->
            <div id="cart-modal" class="modal">
                <div class="modal-content">
                    <h2>Shopping Cart</h2>
                    <div id="cart-items"></div>
                    <p id="cart-total">Total: $0.00</p>
                    <div class="cart-actions">
                        <button id="clear-cart" class="btn">Clear Cart</button>
                        <button id="process-order" class="btn">Process Order</button>
                    </div>
                </div>
            </div>
        </section>

        <div class="lightbox" id="gallery-lightbox" role="dialog" aria-modal="true" aria-hidden="true">
            <button class="lightbox-close" aria-label="Close image viewer">&times;</button>
            <button class="lightbox-prev" aria-label="Previous image">&lt;</button>
            <div class="lightbox-content">
                <img src="" alt="" class="lightbox-image">
                <p class="lightbox-caption" aria-live="polite"></p>
            </div>
            <button class="lightbox-next" aria-label="Next image">&gt;</button>
        </div>
    </main>

    <footer>
        <div class="container footer-content">
            <div>
                <h3>Book Haven</h3>
                <p>Your sanctuary for literary discoveries</p>
            </div>
            <div>
                <h4>Visit Us</h4>
                <p>123 Bookmark Lane</p>
                <p>Booktown, BT 12345</p>
            </div>
            <div>
                <h4>Connect</h4>
                <ul class="social-links">
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Twitter</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Main scripts -->
    <script src="js/script.js"></script>
    <script src="js/gallery.js"></script>
    
    <!-- Image error handling -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const images = document.querySelectorAll('.gallery-item img');
            images.forEach(img => {
                img.addEventListener('error', () => {
                    img.classList.add('image-error');
                    img.closest('.gallery-item').classList.add('load-error');
                });
            });
        });
    </script>
</body>
</html>

