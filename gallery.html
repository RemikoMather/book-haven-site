<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Browse our curated collection of books at Book Haven. Find fiction, non-fiction, and children's books from your favorite authors.">
    <meta name="keywords" content="books, bookstore, fiction books, non-fiction books, children's books, reading">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Book Gallery | Book Haven">
    <meta property="og:description" content="Browse our curated collection of books at Book Haven">
    <meta property="og:image" content="images/gallery-preview.jpg">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="preload" href="js/script.js" as="script">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <title>Book Gallery | Book Haven</title>
    
    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Skip Link for Keyboard Users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header role="banner">
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="logo">
                <img src="images/logo.svg" alt="Book Haven Logo" width="40" height="40">
                <h1>Book Haven</h1>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="gallery.html" aria-current="page">Gallery</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="custom.html">Staff Picks</a></li>
            </ul>
            <button class="cart-btn" id="cartButton" aria-label="Shopping cart">
                <span class="cart-icon" aria-hidden="true">ðŸ›’</span>
                <span class="cart-count" aria-live="polite">0</span>
            </button>
        </nav>
    </header>

    <main id="main-content" role="main">
        <section class="gallery-header">
            <h2>Browse Our Collection</h2>
            <div class="filters" role="group" aria-label="Book category filters">
                <button class="filter-btn active" data-filter="all" aria-pressed="true">All Books</button>
                <button class="filter-btn" data-filter="fiction" aria-pressed="false">Fiction</button>
                <button class="filter-btn" data-filter="non-fiction" aria-pressed="false">Non-Fiction</button>
                <button class="filter-btn" data-filter="children" aria-pressed="false">Children's</button>
            </div>
        </section>

        <!-- Add Loading State -->
        <div id="loading-state" class="loading-container" hidden>
            <div class="loading-spinner"></div>
            <p>Loading books...</p>
        </div>

        <!-- Add Error State -->
        <div id="error-state" class="error-container" hidden>
            <p>Sorry, we couldn't load the books. Please try again.</p>
            <button class="btn btn-primary" onclick="loadBooks()">Retry</button>
        </div>

        <div class="gallery-grid" role="list">
            <!-- Add Template for Dynamic Book Loading -->
            <template id="book-template">
                <article class="book-card" role="listitem">
                    <span class="book-badge"></span>
                    <img class="book-image" loading="lazy">
                    <div class="book-info">
                        <h3 class="book-title"></h3>
                        <p class="book-author"></p>
                        <p class="book-price"></p>
                        <button class="btn btn-primary add-to-cart"></button>
                    </div>
                </article>
            </template>
        </div>

        <!-- Add Pagination -->
        <nav class="pagination" role="navigation" aria-label="Gallery pages">
            <button class="btn btn-secondary" id="prevPage" disabled>Previous</button>
            <span id="pageInfo" aria-live="polite">Page 1 of 1</span>
            <button class="btn btn-secondary" id="nextPage" disabled>Next</button>
        </nav>
    </main>

    <!-- Cart Modal -->
    <div class="modal-overlay" id="modalOverlay" hidden>
        <div 
            class="cart-modal" 
            role="dialog" 
            aria-labelledby="cartTitle"
            aria-modal="true"
        >
            <header class="modal-header">
                <h2 id="cartTitle">Your Shopping Cart</h2>
                <button 
                    class="close-modal" 
                    aria-label="Close cart"
                    onclick="closeCart()"
                >Ã—</button>
            </header>
            
            <!-- Empty Cart State -->
            <div id="emptyCart" class="empty-cart" hidden>
                <p>Your cart is empty</p>
                <button 
                    class="btn btn-primary"
                    onclick="closeCart()"
                >Continue Shopping</button>
            </div>

            <div class="cart-items" role="list">
                <template id="cart-item-template">
                    <div class="cart-item" role="listitem">
                        <div class="item-info">
                            <h3 class="item-title"></h3>
                            <p class="item-price"></p>
                        </div>
                        <div class="item-actions">
                            <button class="quantity-btn minus" aria-label="Decrease quantity">-</button>
                            <span class="quantity" aria-label="Quantity">1</span>
                            <button class="quantity-btn plus" aria-label="Increase quantity">+</button>
                            <button class="remove-item" aria-label="Remove from cart">Ã—</button>
                        </div>
                    </div>
                </template>
            </div>

            <footer class="modal-footer">
                <p class="cart-total">
                    Total: <span aria-live="polite">$0.00</span>
                </p>
                <div class="cart-actions">
                    <button 
                        class="btn btn-secondary"
                        onclick="clearCart()"
                        aria-label="Clear shopping cart"
                    >Clear Cart</button>
                    <button 
                        class="btn btn-primary"
                        onclick="checkout()"
                        aria-label="Proceed to checkout"
                    >Checkout</button>
                </div>
            </footer>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Visit Us</h3>
                <p>123 Literary Lane</p>
                <p>Booktown, BT 12345</p>
            </div>
            <div class="footer-section">
                <h3>Hours</h3>
                <p>Mon-Sat: 9am - 8pm</p>
                <p>Sun: 10am - 6pm</p>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>Tel: (555) 123-BOOK</p>
                <p>Email: hello@bookhaven.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Book Haven. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="js/script.js"></script>
    <script type="module">
        import { initializeSharedFeatures } from './js/shared.js';
        import { initializeGallery } from './js/gallery.js';

        document.addEventListener('DOMContentLoaded', () => {
            initializeSharedFeatures();
            initializeGallery({
                itemsPerPage: 12,
                container: document.querySelector('.gallery-grid'),
                template: document.querySelector('#book-template')
            });
        });
    </script>
</body>
</html>

