<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About & Contact - Book Haven Wireframe</title>
    <link rel="stylesheet" href="css/wireframe-base.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="wireframe-nav" data-label="Main Navigation">
        <div class="wireframe-logo">LOGO</div>
        <div class="wireframe-box" data-label="Navigation Links">
            <a href="index.html" class="wireframe-text" data-width="short">Home</a>
            <a href="gallery.html" class="wireframe-text" data-width="short">Gallery</a>
            <a href="about.html" class="wireframe-text" data-width="short">About</a>
            <a href="custom.html" class="wireframe-text" data-width="short">Custom</a>
        </div>
    </nav>

    <main>
        <div class="wireframe-box" data-label="About Section">
            <div class="wireframe-text" data-width="long">Welcome to Book Haven</div>
            <div class="wireframe-text" data-width="medium">Your Literary Sanctuary</div>
            <div class="wireframe-placeholder">About content goes here</div>
        </div>

        <!-- Store Hours -->
        <div class="wireframe-box" data-label="Store Hours">
            <table class="wireframe-table">
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Hours</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Monday - Friday</td>
                        <td>9:00 AM - 8:00 PM</td>
                    </tr>
                    <tr>
                        <td>Saturday</td>
                        <td>10:00 AM - 6:00 PM</td>
                    </tr>
                    <tr>
                        <td>Sunday</td>
                        <td>11:00 AM - 5:00 PM</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Contact Form -->
        <div class="wireframe-box" data-label="Contact Form">
            <form id="contactForm" class="wireframe-form">
                <div class="wireframe-input-group">
                    <label class="wireframe-label">Name</label>
                    <input type="text" class="wireframe-input" name="name" required>
                </div>

                <div class="wireframe-input-group">
                    <label class="wireframe-label">Email</label>
                    <input type="email" class="wireframe-input" name="email" required>
                </div>

                <div class="wireframe-input-group">
                    <label class="wireframe-label">Phone</label>
                    <input type="tel" class="wireframe-input" name="phone">
                </div>

                <div class="wireframe-input-group">
                    <label class="wireframe-label">Message</label>
                    <textarea class="wireframe-textarea" name="message" required></textarea>
                </div>

                <button type="submit" class="wireframe-button">Send Message</button>
            </form>
        </div>

        <!-- Previous Messages -->
        <div class="wireframe-box" data-label="Previous Messages" id="previousMessages">
            <!-- Will be populated by JavaScript -->
        </div>
    </main>

    <!-- Include Footer Component -->
    <wireframe-footer></wireframe-footer>

    <script>
        class ContactManager {
            constructor() {
                this.setupForm();
                this.loadPreviousMessages();
            }

            setupForm() {
                const form = document.getElementById('contactForm');
                if (!form) return;

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (this.validateForm(form)) {
                        this.submitForm(form);
                    }
                });

                // Real-time validation
                form.querySelectorAll('input, textarea').forEach(input => {
                    input.addEventListener('input', () => {
                        this.validateField(input);
                    });
                });
            }

            validateField(field) {
                let isValid = true;
                let message = '';

                if (field.required && !field.value.trim()) {
                    isValid = false;
                    message = 'This field is required';
                } else if (field.type === 'email' && field.value) {
                    isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(field.value);
                    message = isValid ? '' : 'Please enter a valid email address';
                } else if (field.type === 'tel' && field.value) {
                    isValid = /^\d{10}$/.test(field.value.replace(/\D/g, ''));
                    message = isValid ? '' : 'Please enter a valid phone number';
                }

                field.classList.toggle('error', !isValid);
                field.classList.toggle('success', isValid && field.value.trim());

                let messageElement = field.parentElement.querySelector('.validation-message');
                if (message) {
                    if (!messageElement) {
                        messageElement = document.createElement('div');
                        messageElement.className = 'validation-message';
                        field.parentElement.appendChild(messageElement);
                    }
                    messageElement.textContent = message;
                } else if (messageElement) {
                    messageElement.remove();
                }

                return isValid;
            }

            validateForm(form) {
                const fields = form.querySelectorAll('input, textarea');
                let isValid = true;

                fields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });

                return isValid;
            }

            submitForm(form) {
                const formData = new FormData(form);
                const message = {
                    id: Date.now(),
                    date: new Date().toISOString(),
                    data: Object.fromEntries(formData.entries())
                };

                // Store in localStorage
                const messages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
                messages.push(message);
                localStorage.setItem('contactMessages', JSON.stringify(messages));

                // Show success modal
                const modal = new WireframeModal('contact', 'Message Sent');
                modal.show(`
                    <div class="wireframe-box" data-label="Success">
                        <p>Thank you for your message!</p>
                        <p>We'll get back to you soon at ${message.data.email}</p>
                    </div>
                `);

                form.reset();
                this.loadPreviousMessages();
            }

            loadPreviousMessages() {
                const container = document.getElementById('previousMessages');
                if (!container) return;

                const messages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
                if (messages.length === 0) {
                    container.innerHTML = `
                        <div class="wireframe-placeholder">No previous messages</div>
                    `;
                    return;
                }

                container.innerHTML = messages.slice(-3).reverse().map(message => `
                    <div class="wireframe-box" data-label="Message ${new Date(message.date).toLocaleDateString()}">
                        <div class="wireframe-text" data-width="medium">${message.data.name}</div>
                        <div class="wireframe-text" data-width="short">${message.data.email}</div>
                        <div class="wireframe-text" data-width="long">${message.data.message}</div>
                    </div>
                `).join('');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            new ContactManager();
        });
    </script>

    <script src="js/components/wireframe-footer.js"></script>
</body>
</html>
